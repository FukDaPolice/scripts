



assert(load(Base64Decode("DQotLVtbQWhyaSBieSBUZWFtIENsYXJpdHldXQ0KDQpsb2NhbCBBdXRoTGlzdCA9IHsidGhlIHJhdCIsIkZhbnRhc3RpayIsIk5pY2tpZWJveSIsIkRldm4iLCJOb3QgUmlvdCJ9IC0tW1tUYWJsZSBvZiB1c2VycyB3aG8geW91IHdpc2ggdG8gdXNlIHRoZSBzY3JpcHQuXV0NCmxvY2FsIFVzZXIgPSBzdHJpbmcubG93ZXIoR2V0VXNlcigpKSAtLVtbQ2FsbHMgdGhlIEdldFVzZXIoKSBmdW5jdGlvbiBvbmNlIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXV0NCmZ1bmN0aW9uIEF1dGgoKQ0KZm9yIGksIHVzZXJzIGluIHBhaXJzKEF1dGhMaXN0KSBkbyAtLVtbRm9yIGxvb3AgdG8gY29tcGFyZSB0aGUgdXNlcm5hbWVzLl1dDQppZiBzdHJpbmcubG93ZXIodXNlcnMpID09IFVzZXIgdGhlbiAtLVtbQ2hlY2tzIGlmIHRoZSB1c2VybmFtZXMgbWF0Y2guXV0NCnJldHVybiB0cnVlIC0tW1tBdXRoZW50aWNhdGVzIHRoZSB1c2VyIGlmIHRoZSB1c2VybmFtZXMgbWF0Y2guXV0NCmVuZA0KZW5kDQpyZXR1cm4gZmFsc2UgLS1bW0lmIHRoZSB1c2VybmFtZXMgZG9uJ3QgbWF0Y2ggYWZ0ZXIgdGhlIGZvciBsb29wIGlzIGNvbXBsZXRlZCwgdGhlIHNjcmlwdCBkb2Vzbid0IGF1dGhlbnRpY2F0ZSB5b3UuXV0NCmVuZA0KaWYgbm90IEF1dGgoKSB0aGVuIHByaW50KCJOb3QgQXV0aGVudGljYXRlZCIpIHJldHVybiBlbmQgLS1bW1RlbGxzIHRoZSB1c2VyIHRoYXQgdGhleSBjYW4ndCB1c2UgdGhlIHNjcmlwdC5dXQ0KcHJpbnQoIkF1dGhlbnRpY2F0ZWQgYXMgIi4uVXNlcikgLS1bW1RlbGxzIHRoZSB1c2VyIGtub3cgdGhhdCB0aGV5IGNhbiB1c2UgdGhlIHNjcmlwdC5dXQ0KLS1bW1BsYWNlIHlvdXIgc2NyaXB0IGNvZGUgaGVyZS5dXQ0KDQppZiBteUhlcm8uY2hhck5hbWUgfj0gJ0FocmknIHRoZW4gcmV0dXJuIGVuZA0KDQoNCg0KLS1kcmF3cyBRK1cgZW5lbXkgSFBiYXINCi0tbGFnIGZyZWUgY2lyY2xlcw0KLS1kcmF3cyBhbmQgYWxlcnQgdSBpZiBzb21lb25lIGlzIGdhbmthYmxlDQotLWNvbWJvIGxvZ2ljIA0KLS1jaGFuZ2UgY2FyZCBmcm9tIHJlZCB0byBibHVlIGlmIGxvdyBtYW5hIGluIGZhcm0gbW9kZQ0KLS1hdXRvIGdvbGQgY2FyZCB3aGVuIHVsZA0KLS1rcyB3aXRoIHEgYW5kIHcNCi0tUiByYW5nZSBpbiB0aGUgbWluaSBtYXANCg0KLS1uZWVkcyBhdXRvIHpob255YQ0KDQotLVtbCQlBdXRvIFVwZGF0ZQkJXV0NCg0KbG9jYWwgVmVyc2lvbiA9ICIxLjEiDQpsb2NhbCBBdXRvVXBkYXRlID0gdHJ1ZQ0KDQpmdW5jdGlvbiBTY3JpcHRNc2cobXNnKQ0KICBwcmludCgiPGZvbnQgY29sb3I9XCIjZGFhNTIwXCI+PGI+Q2xhcml0eSBBaHJpOjwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiIuLm1zZy4uIjwvZm9udD4iKQ0KZW5kDQoNCg0KbG9jYWwgSG9zdCA9ICJyYXcuZ2l0aHViLmNvbSINCg0KbG9jYWwgU2NyaXB0RmlsZVBhdGggPSBTQ1JJUFRfUEFUSC4uR2V0Q3VycmVudEVudigpLkZJTEVfTkFNRQ0KDQpsb2NhbCBTY3JpcHRQYXRoID0gIi9GdWtEYVBvbGljZS9zY3JpcHRzL2Jsb2IvbWFzdGVyL0NsYXJpdHlBaHJpLmx1YSIuLiI/cmFuZD0iLi5tYXRoLnJhbmRvbSgxLDEwMDAwKQ0KbG9jYWwgVXBkYXRlVVJMID0gImh0dHBzOi8vIi4uSG9zdC4uU2NyaXB0UGF0aA0KDQpsb2NhbCBWZXJzaW9uUGF0aCA9ICIvRnVrRGFQb2xpY2Uvc2NyaXB0cy9ibG9iL21hc3Rlci9DbGFyaXR5QWhyaS52ZXJzaW9uIi4uIj9yYW5kPSIuLm1hdGgucmFuZG9tKDEsMTAwMDApDQpsb2NhbCBWZXJzaW9uRGF0YSA9IHRvbnVtYmVyKEdldFdlYlJlc3VsdChIb3N0LCBWZXJzaW9uUGF0aCkpDQoNCmlmIEF1dG9VcGRhdGUgdGhlbg0KDQogIGlmIFZlcnNpb25EYXRhIHRoZW4NCiAgDQogICAgU2VydmVyVmVyc2lvbiA9IHR5cGUoVmVyc2lvbkRhdGEpID09ICJudW1iZXIiIGFuZCBWZXJzaW9uRGF0YSBvciBuaWwNCiAgICANCiAgICBpZiBTZXJ2ZXJWZXJzaW9uIHRoZW4NCiAgICANCiAgICAgIGlmIHRvbnVtYmVyKFZlcnNpb24pIDwgU2VydmVyVmVyc2lvbiB0aGVuDQogICAgICAgIFNjcmlwdE1zZygiTmV3IHZlcnNpb24gYXZhaWxhYmxlOiB2Ii4uVmVyc2lvbkRhdGEpDQogICAgICAgIFNjcmlwdE1zZygiVXBkYXRpbmcsIHBsZWFzZSBkb24ndCBwcmVzcyBGOS4iKQ0KICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIERvd25sb2FkRmlsZShVcGRhdGVVUkwsIFNjcmlwdEZpbGVQYXRoLCBmdW5jdGlvbiAoKSBTY3JpcHRNc2coIlN1Y2Nlc3NmdWxseSB1cGRhdGVkLjogdiIuLlZlcnNpb24uLiIgPT4gdiIuLlZlcnNpb25EYXRhLi4iLCBQcmVzcyBGOSB0d2ljZSB0byBsb2FkIHRoZSB1cGRhdGVkIHZlcnNpb24uIikgZW5kKSBlbmQsIDMpDQogICAgICBlbHNlDQogICAgICAgIFNjcmlwdE1zZygiWW91J3ZlIGdvdCB0aGUgbGF0ZXN0IHZlcnNpb246IHYiLi5WZXJzaW9uKQ0KICAgICAgZW5kDQogICAgICANCiAgICBlbmQNCiAgICANCiAgZWxzZQ0KICAgIFNjcmlwdE1zZygiRXJyb3IgZG93bmxvYWRpbmcgdmVyc2lvbiBpbmZvLiIpDQogIGVuZA0KICANCmVsc2UNCiAgU2NyaXB0TXNnKCJBdXRvVXBkYXRlOiBmYWxzZSIpDQplbmQNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCg0KDQpyZXF1aXJlICJTeE9yYldhbGsiDQpyZXF1aXJlICJWUHJlZGljdGlvbiINCg0KaWYgRmlsZUV4aXN0KExJQl9QQVRILi4iRGl2aW5lUHJlZC5sdWEiKSB0aGVuDQoJZGl2aW5lUHJlZExvYWRlZCA9IHRydWUNCglyZXF1aXJlICJEaXZpbmVQcmVkIg0KZW5kIA0KDQpsb2NhbCBBQSA9IEFhDQpsb2NhbCBRID0ge3JhbmdlID0gODgwLCBkZWxheSA9IDAuMjUsIHNwZWVkID0gMTYwMCwgd2lkdGggPSA5MCxJc1JlYWR5ID0gZnVuY3Rpb24oKSByZXR1cm4gbXlIZXJvOkNhblVzZVNwZWxsKF9RKSA9PSBSRUFEWSBlbmR9DQpsb2NhbCBXID0ge3JhbmdlID0gNTUwLCBJc1JlYWR5ID0gZnVuY3Rpb24oKSByZXR1cm4gbXlIZXJvOkNhblVzZVNwZWxsKF9XKSA9PSBSRUFEWSBlbmR9DQpsb2NhbCBFID0ge3JhbmdlID0gOTc1LCBkZWxheSA9IDAuMjUsIHNwZWVkID0gMTUwMCwgd2lkdGggPSAxMDAsSXNSZWFkeSA9IGZ1bmN0aW9uKCkgcmV0dXJuIG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgZW5kfQ0KbG9jYWwgUiA9IHtyYW5nZSA9IDQ1MCwgZGVsYXkgPSAwLjI1LCBzcGVlZCA9IDE1MDAsIHdpZHRoID0gODAsSXNSZWFkeSA9IGZ1bmN0aW9uKCkgcmV0dXJuIG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkgZW5kfQ0KbG9jYWwgaWduaXRlID0gbmlsDQpsb2NhbCBpRG1nID0gMA0KbG9jYWwgaW5mb3JtYXRpb25UYWJsZSA9IHt9DQpsb2NhbCBzcGVsbEV4cGlyZWQgPSB0cnVlDQpsb2NhbCB0cw0KbG9jYWwgdHMgPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMzAwLCBEQU1BR0VfTUFHSUMsIHRydWUpDQpsb2NhbCBteVRhcmdldCA9IG5pbA0KbG9jYWwgS2lsbGFibGUgPSBmYWxzZQ0KbG9jYWwgTGFzdEFsZXJ0ID0gMA0KDQpsb2NhbCBjaGVja0ZvdW50YWluID0gZmFsc2UNCmxvY2FsIG5leHRVcGRhdGUgPSAwDQpsb2NhbCB1c2VUaW1lciA9IDANCmxvY2FsIHBvdGlvbnMgPSB7CQkJCQ0KCQloZWFsdGhQb3Rpb24gPSB7DQoJCQlzbG90ID0gbmlsLA0KCQkJbmV4dFVzZSA9IDAsDQoJCQlpc0J1ZmZlZCA9IGZhbHNlLA0KCQkJCQ0KCQkJaXRlbUlECT0gMjAwMywJCQ0KCQkJLS1jb21wYXJlVmFsdWUgPSBmdW5jdGlvbigpIHJldHVybiAoKHBsYXllci5oZWFsdGggLyBwbGF5ZXIubWF4SGVhbHRoKSoxMDApIGVuZCwNCgkJCWJ1ZmYgPSAiUmVnZW5lcmF0aW9uUG90aW9uIiwNCgkJfSwNCgkJbWFuYVBvdGlvbiA9IHsNCgkJCXNsb3QgPSBuaWwsDQoJCQluZXh0VXNlID0gMCwNCgkJCWlzQnVmZmVkID0gZmFsc2UsDQoJCQkNCgkJCWl0ZW1JRAk9IDIwMDQsCQkNCgkJCS0tY29tcGFyZVZhbHVlID0gZnVuY3Rpb24oKSByZXR1cm4gKChwbGF5ZXIubWFuYSAvIHBsYXllci5tYXhNYW5hKSoxMDApIGVuZCwNCgkJCWJ1ZmYgPSAiRmxhc2tPZkNyeXN0YWxXYXRlciIsDQoJCX0sDQoJfQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tRFByZWQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQoNCmxvY2FsIFRvSW50ZXJydXB0ID0ge30NCmxvY2FsIEludGVycnVwdExpc3QgPSB7DQogICAgeyBjaGFyTmFtZSA9ICJDYWl0bHluIiwgc3BlbGxOYW1lID0gIkNhaXRseW5BY2VpbnRoZUhvbGUifSwNCiAgICB7IGNoYXJOYW1lID0gIkZpZGRsZVN0aWNrcyIsIHNwZWxsTmFtZSA9ICJDcm93c3Rvcm0ifSwNCiAgICB7IGNoYXJOYW1lID0gIkZpZGRsZVN0aWNrcyIsIHNwZWxsTmFtZSA9ICJEcmFpbkNoYW5uZWwifSwNCiAgICB7IGNoYXJOYW1lID0gIkdhbGlvIiwgc3BlbGxOYW1lID0gIkdhbGlvSWRvbE9mRHVyYW5kIn0sDQogICAgeyBjaGFyTmFtZSA9ICJLYXJ0aHVzIiwgc3BlbGxOYW1lID0gIkZhbGxlbk9uZSJ9LA0KICAgIHsgY2hhck5hbWUgPSAiS2F0YXJpbmEiLCBzcGVsbE5hbWUgPSAiS2F0YXJpbmFSIn0sDQogICAgeyBjaGFyTmFtZSA9ICJMdWNpYW4iLCBzcGVsbE5hbWUgPSAiTHVjaWFuUiJ9LA0KICAgIHsgY2hhck5hbWUgPSAiTWFsemFoYXIiLCBzcGVsbE5hbWUgPSAiQWxaYWhhck5ldGhlckdyYXNwIn0sDQogICAgeyBjaGFyTmFtZSA9ICJNaXNzRm9ydHVuZSIsIHNwZWxsTmFtZSA9ICJNaXNzRm9ydHVuZUJ1bGxldFRpbWUifSwNCiAgICB7IGNoYXJOYW1lID0gIk51bnUiLCBzcGVsbE5hbWUgPSAiQWJzb2x1dGVaZXJvIn0sICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgIHsgY2hhck5hbWUgPSAiUGFudGhlb24iLCBzcGVsbE5hbWUgPSAiUGFudGhlb25fR3JhbmRTa3lmYWxsX0p1bXAifSwNCiAgICB7IGNoYXJOYW1lID0gIlNoZW4iLCBzcGVsbE5hbWUgPSAiU2hlblN0YW5kVW5pdGVkIn0sDQogICAgeyBjaGFyTmFtZSA9ICJVcmdvdCIsIHNwZWxsTmFtZSA9ICJVcmdvdFN3YXAyIn0sDQogICAgeyBjaGFyTmFtZSA9ICJWYXJ1cyIsIHNwZWxsTmFtZSA9ICJWYXJ1c1EifSwNCgl7IGNoYXJOYW1lID0gIldhcndpY2siLCBzcGVsbE5hbWUgPSAiSW5maW5pdGVEdXJlc3MifSwNCgl7IGNoYXJOYW1lID0gIlZlbGtveiIsIHNwZWxsTmFtZSA9ICJWZWxrb3pSIn0NCn0NCg0KDQoNClRleHRMaXN0ID0geyIiLCAiS2lsbCBIaW0hIn0NCktpbGxUZXh0ID0ge30NCmNvbG9yVGV4dCA9IEFSR0IoMjU1LDI1NSwyMDQsMCkNCg0KDQpmdW5jdGlvbiBHZXRDdXN0b21UYXJnZXQoKQ0KCXRzOnVwZGF0ZSgpDQoJaWYgX0cuQXV0b0NhcnJ5IGFuZCBWYWxpZFRhcmdldChfRy5BdXRvQ2FycnkuQ3Jvc3NoYWlyOkdldFRhcmdldCgpKSB0aGVuIHJldHVybiBfRy5BdXRvQ2FycnkuQ3Jvc3NoYWlyOkdldFRhcmdldCgpIGVuZA0KCWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIHRoZW4gcmV0dXJuIHRzLnRhcmdldCBlbmQNCglyZXR1cm4gdHMudGFyZ2V0DQplbmQNCg0KZnVuY3Rpb24gT25Mb2FkKCkNCiAgICAgDQoJY2hlY2tGb3VudGFpbiA9IChHZXRHYW1lKCkubWFwLmluZGV4IH49IDcgYW5kIEdldEdhbWUoKS5tYXAuaW5kZXggfj0gMTIpIC0tIG5vIGhlYWwgaW4gUHJvdmluZyBHcm91bmQgLyBBUkFNICANCglQcmludENoYXQoIjxmb250IGNvbG9yPVwiIzAwRkYwMFwiPkFocmkgYnkgVGVhbSBDbGFyaXR5LjwvZm9udD4iKQ0KCUl0ZW1OYW1lcwkJCQk9IHsNCgkJWzMzMDNdCQkJCT0gIkFyY2hBbmdlbHNEdW1teVNwZWxsIiwNCgkJWzMwMDddCQkJCT0gIkFyY2hBbmdlbHNEdW1teVNwZWxsIiwNCgkJWzMxNDRdCQkJCT0gIkJpbGdld2F0ZXJDdXRsYXNzIiwNCgkJWzMxODhdCQkJCT0gIkl0ZW1CbGFja2ZpcmVUb3JjaCIsDQoJCVszMTUzXQkJCQk9ICJJdGVtU3dvcmRPZkZlYXN0QW5kRmFtaW5lIiwNCgkJWzM0MDVdCQkJCT0gIlRyaW5rZXRTd2VlcGVyTHZsMSIsDQoJCVszNDExXQkJCQk9ICJUcmlua2V0T3JiTHZsMSIsDQoJCVszMTY2XQkJCQk9ICJUcmlua2V0VG90ZW1MdmwxIiwNCgkJWzM0NTBdCQkJCT0gIk9kaW5Ucmlua2V0UmV2aXZlIiwNCgkJWzIwNDFdCQkJCT0gIkl0ZW1DcnlzdGFsRmxhc2siLA0KCQlbMjA1NF0JCQkJPSAiSXRlbUtpbmdQb3JvU25hY2siLA0KCQlbMjEzOF0JCQkJPSAiRWxpeGlyT2ZJcm9uIiwNCgkJWzIxMzddCQkJCT0gIkVsaXhpck9mUnVpbiIsDQoJCVsyMTM5XQkJCQk9ICJFbGl4aXJPZlNvcmNlcnkiLA0KCQlbMjE0MF0JCQkJPSAiRWxpeGlyT2ZXcmF0aCIsDQoJCVszMTg0XQkJCQk9ICJPZGluRW50cm9waWNDbGF5bW9yZSIsDQoJCVsyMDUwXQkJCQk9ICJJdGVtTWluaVdhcmQiLA0KCQlbMzQwMV0JCQkJPSAiSGVhbHRoQm9tYiIsDQoJCVszMzYzXQkJCQk9ICJUcmlua2V0T3JiTHZsMyIsDQoJCVszMDkyXQkJCQk9ICJJdGVtR2xhY2lhbFNwaWtlQ2FzdCIsDQoJCVszNDYwXQkJCQk9ICJBc2NXYXJwIiwNCgkJWzMzNjFdCQkJCT0gIlRyaW5rZXRUb3RlbUx2bDMiLA0KCQlbMzM2Ml0JCQkJPSAiVHJpbmtldFRvdGVtTHZsNCIsDQoJCVszMTU5XQkJCQk9ICJIZXh0ZWNoU3dlZXBlciIsDQoJCVsyMDUxXQkJCQk9ICJJdGVtSG9ybiIsDQoJCS0tWzIwMDNdCQkJPSAiUmVnZW5lcmF0aW9uUG90aW9uIiwNCgkJWzMxNDZdCQkJCT0gIkhleHRlY2hHdW5ibGFkZSIsDQoJCVszMTg3XQkJCQk9ICJIZXh0ZWNoU3dlZXBlciIsDQoJCVszMTkwXQkJCQk9ICJJcm9uU3R5bHVzIiwNCgkJWzIwMDRdCQkJCT0gIkZsYXNrT2ZDcnlzdGFsV2F0ZXIiLA0KCQlbMzEzOV0JCQkJPSAiSXRlbU1lcmN1cmlhbCIsDQoJCVszMjIyXQkJCQk9ICJJdGVtTW9yZWxsb3NCYW5lIiwNCgkJWzMwNDJdCQkJCT0gIk11cmFtYW5hIiwNCgkJWzMwNDNdCQkJCT0gIk11cmFtYW5hIiwNCgkJWzMxODBdCQkJCT0gIk9keW5zVmVpbCIsDQoJCVszMDU2XQkJCQk9ICJJdGVtRmFpdGhTaGFrZXIiLA0KCQlbMjA0N10JCQkJPSAiT3JhY2xlRXh0cmFjdFNpZ2h0IiwNCgkJWzMzNjRdCQkJCT0gIlRyaW5rZXRTd2VlcGVyTHZsMyIsDQoJCVsyMDUyXQkJCQk9ICJJdGVtUG9yb1NuYWNrIiwNCgkJWzMxNDBdCQkJCT0gIlF1aWNrc2lsdmVyU2FzaCIsDQoJCVszMTQzXQkJCQk9ICJSYW5kdWluc09tZW4iLA0KCQlbMzA3NF0JCQkJPSAiSXRlbVRpYW1hdENsZWF2ZSIsDQoJCVszODAwXQkJCQk9ICJJdGVtUmlnaHRlb3VzR2xvcnkiLA0KCQlbMjA0NV0JCQkJPSAiSXRlbUdob3N0V2FyZCIsDQoJCVszMzQyXQkJCQk9ICJUcmlua2V0T3JiTHZsMSIsDQoJCVszMDQwXQkJCQk9ICJJdGVtU2VyYXBoc0VtYnJhY2UiLA0KCQlbMzA0OF0JCQkJPSAiSXRlbVNlcmFwaHNFbWJyYWNlIiwNCgkJWzIwNDldCQkJCT0gIkl0ZW1HaG9zdFdhcmQiLA0KCQlbMzM0NV0JCQkJPSAiT2RpblRyaW5rZXRSZXZpdmUiLA0KCQlbMjA0NF0JCQkJPSAiU2lnaHRXYXJkIiwNCgkJWzMzNDFdCQkJCT0gIlRyaW5rZXRTd2VlcGVyTHZsMSIsDQoJCVszMDY5XQkJCQk9ICJzaHVyZWx5YXNjcmVzdCIsDQoJCVszNTk5XQkJCQk9ICJLYWxpc3RhUFNwZWxsQ2FzdCIsDQoJCVszMTg1XQkJCQk9ICJIZXh0ZWNoU3dlZXBlciIsDQoJCVszMDc3XQkJCQk9ICJJdGVtVGlhbWF0Q2xlYXZlIiwNCgkJWzIwMDldCQkJCT0gIkl0ZW1NaW5pUmVnZW5Qb3Rpb24iLA0KCQlbMjAxMF0JCQkJPSAiSXRlbU1pbmlSZWdlblBvdGlvbiIsDQoJCVszMDIzXQkJCQk9ICJJdGVtV3JhaXRoQ29sbGFyIiwNCgkJWzMyOTBdCQkJCT0gIkl0ZW1XcmFpdGhDb2xsYXIiLA0KCQlbMjA0M10JCQkJPSAiVmlzaW9uV2FyZCIsDQoJCVszMzQwXQkJCQk9ICJUcmlua2V0VG90ZW1MdmwxIiwNCgkJWzMwOTBdCQkJCT0gIlpob255YXNIb3VyZ2xhc3MiLA0KCQlbMzE1NF0JCQkJPSAid3JpZ2dsZWxhbnRlcm4iLA0KCQlbMzE0Ml0JCQkJPSAiWW91bXVzQmxhZGUiLA0KCQlbMzE1N10JCQkJPSAiWmhvbnlhc0hvdXJnbGFzcyIsDQoJCVszNTEyXQkJCQk9ICJJdGVtVm9pZEdhdGUiLA0KCQlbMzEzMV0JCQkJPSAiSXRlbVNvVEQiLA0KCQlbMzEzN10JCQkJPSAiSXRlbURlcnZpc2hCbGFkZSIsDQoJCVszMzUyXQkJCQk9ICJSZWxpY1Nwb3R0ZXIiLA0KCQlbMzM1MF0JCQkJPSAiVHJpbmtldFRvdGVtTHZsMiIsDQoJfQ0KCV9HLklURU1fMQkJCQk9IDA2DQoJX0cuSVRFTV8yCQkJCT0gMDcNCglfRy5JVEVNXzMJCQkJPSAwOA0KCV9HLklURU1fNAkJCQk9IDA5DQoJX0cuSVRFTV81CQkJCT0gMTANCglfRy5JVEVNXzYJCQkJPSAxMQ0KCV9HLklURU1fNwkJCQk9IDEyDQoJDQoJX19fR2V0SW52ZW50b3J5U2xvdEl0ZW0JPSByYXdnZXQoX0csICJHZXRJbnZlbnRvcnlTbG90SXRlbSIpDQoJX0cuR2V0SW52ZW50b3J5U2xvdEl0ZW0JPSBHZXRTbG90SXRlbQ0KICAgIG15SGVybyA9IEdldE15SGVybygpDQoJY2hlY2tEaXN0YW5jZSA9IDMwMDAgKiAzMDAwDQoJSWduaXRlQ2hlY2soKQ0KCUZMb2FkTGliKCkNCglWUCA9IFZQcmVkaWN0aW9uKHRydWUpDQoJaWYgZGl2aW5lUHJlZExvYWRlZCB0aGVuDQoJCURQID0gRGl2aW5lUHJlZCgpIA0KCWVuZA0KICAgIF9HLm9sZERyYXdDaXJjbGUgPSByYXdnZXQoX0csICdEcmF3Q2lyY2xlJykNCglfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTINCgkNCglNaW5pb25zID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksIFEucmFuZ2UsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0FTQykNCglKdW5nbGVNaW5pb25zID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCBRLnJhbmdlLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQplbmQNCg0KDQpmdW5jdGlvbiBPblRpY2soKQ0KCXRhcmdldCA9IEdldEN1c3RvbVRhcmdldCgpDQoJQ2hlY2tzKCkNCgkNCglpZiBpc1NYIHRoZW4NCgkJU3hPcmI6Rm9yY2VUYXJnZXQodGFyZ2V0KQ0KCWVuZA0KCWlmIG5vdCBUYXJnZXRIYXZlQnVmZiggIlJlZ2VuZXJhdGlvblBvdGlvbiIgLCBteUhlcm8pIHRoZW4NCgkNCgkJaWYgSGF6TWVudS5Nb3JlLmF1dG9wb3QgdGhlbg0KCQkJDQoJCQlpZiAobXlIZXJvLmhlYWx0aC9teUhlcm8ubWF4SGVhbHRoIDwgSGF6TWVudS5Nb3JlLmF1dG9SZWQvMTAwKSB0aGVuDQoJCQkNCgkJCQkNCgkJCQktLUNhc3RJdGVtKDIwMDMpDQoJCQkJQ2FzdFNwZWxsKElURU1fMSkNCgkJCQkJDQoJCQkNCgkJCWVuZA0KCQkJDQoJCWVuZA0KCQ0KCWVuZA0KICAgIGlmIG5vdCBUYXJnZXRIYXZlQnVmZiggIkZsYXNrT2ZDcnlzdGFsV2F0ZXIiICwgbXlIZXJvKSB0aGVuDQoJCQ0KCQlpZiBIYXpNZW51Lk1vcmUuYXV0b3BvdCB0aGVuDQoJCQkNCgkJCWlmIChteUhlcm8ubWFuYS9teUhlcm8ubWF4TWFuYSA8IEhhek1lbnUuTW9yZS5hdXRvQmx1ZS8xMDApIHRoZW4NCgkJCQkNCgkJCQktLUNhc3RJdGVtKDIwMDMpDQoJCQkJQ2FzdFNwZWxsKElURU1fMikNCgkJCQ0KCQkJZW5kDQoJCQkJDQoJCWVuZA0KCQkJDQoJZW5kDQogICAgDQplbmQNCg0KZnVuY3Rpb24gT25EcmF3KCkNCglpZiBIYXpNZW51LkRyYXcuZHJhd3EgdGhlbg0KCQlEcmF3Q2lyY2xlKG15SGVyby54LG15SGVyby55LG15SGVyby56LDg3MCwweEZGRkYwMDAwKQ0KCWVuZCAJCQkNCglpZiBIYXpNZW51LkRyYXcuZHJhd3cgdGhlbg0KCQlEcmF3Q2lyY2xlKG15SGVyby54LG15SGVyby55LG15SGVyby56LDU1MCwweEZGRkYwMDAwKQ0KCWVuZA0KCWlmIEhhek1lbnUuRHJhdy5kcmF3ZSB0aGVuDQoJCURyYXdDaXJjbGUobXlIZXJvLngsbXlIZXJvLnksbXlIZXJvLnosOTc1LDB4RkZGRjAwMDApDQoJZW5kDQoJaWYgSGF6TWVudS5EcmF3LmRyYXdyIHRoZW4NCgkJRHJhd0NpcmNsZShteUhlcm8ueCxteUhlcm8ueSxteUhlcm8ueiw0NTAsMHhGRkZGMDAwMCkNCgllbmQNCgktLWlmIEhhek1lbnUuRHJhdy5kcmF3dCBhbmQgVGFyZ2V0IH49IG5pbCB0aGVuDQoJCS0tRHJhd0NpcmNsZShUYXJnZXQueCwgVGFyZ2V0LnksIFRhcmdldC56LCA4MCwweEZGRkYwMDAwKQ0KCS0tZW5kDQoJaWYgIEhhek1lbnUuRHJhdy5kcmF3SFAgdGhlbg0KCQkJZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgIAkJCWlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQoJCQkgICAgICAgRHJhd0luZGljYXRvcihlbmVteSkNCgkJCSAgICBlbmQNCgkgICAgICAgIGVuZA0KCWVuZAkJDQoJDQoJaWYgSGF6TWVudS5NaXNjLmtpbGx0ZXh0IHRoZW4NCgkJZm9yIGkgPSAxLCBoZXJvTWFuYWdlci5pQ291bnQgZG8NCgkJCWxvY2FsIHRhcmdldCA9IGhlcm9NYW5hZ2VyOkdldEhlcm8oaSkNCgkJCWlmIFZhbGlkVGFyZ2V0KHRhcmdldCkgYW5kIHRhcmdldCB+PSBuaWwgdGhlbg0KCQkJICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCkgYW5kIHRhcmdldCB+PSBuaWwgdGhlbg0KCQkJCWxvY2FsIGJhclBvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueikpDQoJCQkJbG9jYWwgUG9zWCA9IGJhclBvcy54IC0gMzUNCgkJCQlsb2NhbCBQb3NZID0gYmFyUG9zLnkgLSAxMA0KCQkJCQ0KCQkJCURyYXdUZXh0KFRleHRMaXN0W0tpbGxUZXh0W2ldXSwgMTYsIFBvc1gsIFBvc1ksIGNvbG9yVGV4dCkNCgkJCQ0KCQkJICAgIGVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZCAgIA0KZW5kDQoNCg0KZnVuY3Rpb24gQ2hlY2tzKCkNCglJUkVBRFkgPSAoaWduaXRlIH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKGlnbml0ZSkgPT0gUkVBRFkpDQoJUVJFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUSkgPT0gUkVBRFkpDQoJV1JFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkpDQoJRVJFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkpDQoJUlJFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkpDQoJY2FsY0RtZygpDQoJTEZDZnVuYygpDQoJU3BlbGxFeHBpcmVkKCkNCgkNCgkNCglpZiBWYWxpZFRhcmdldCh0YXJnZXQpIHRoZW4NCgkJaWYgSGF6TWVudS5NaXNjLktTIHRoZW4gS1ModGFyZ2V0KSBlbmQNCgkJaWYgSGF6TWVudS5NaXNjLklnbml0ZSB0aGVuIEF1dG9JZ25pdGUodGFyZ2V0KSBlbmQNCgkgICAgDQoJICAgDQoJZW5kDQoJCQ0KCWlmIEhhek1lbnUuTWlzYy56aG9ueWEgdGhlbiANCiAgICBaaG9ueWEoKQ0KICAgIGVuZAkNCglpZiBIYXpNZW51LkZhcm0uTWFuYSB0aGVuIGVuZA0KCWlmIEhhek1lbnUuSGFyYXNzLk1hbmEgdGhlbiBlbmQNCgkNCglpZiBIYXpNZW51LmNvbWJva2V5IHRoZW4NCgkJQ29tYm8oKQ0KICAgIGVuZAkNCiAgIGlmIEhhek1lbnUuaGFyYXNza2V5IHRoZW4NCgkJUG9rZSgpDQogICBlbmQNCiAgIGlmIEhhek1lbnUuZmFybWtleSB0aGVuDQoJCUZhcm0oKQ0KICAgZW5kDQogICAgaWYgSGF6TWVudS5Nb3JlLm1vdmV0byB0aGVuDQogICAgICAgIG1vdmV0bygpCQkJDQoJZW5kCQ0KICAgIAkNCmVuZA0KDQpmdW5jdGlvbiBJZ25pdGVDaGVjaygpDQoJaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTVU1NT05FUl8xKS5uYW1lOmZpbmQoInN1bW1vbmVyZG90IikgdGhlbg0KCQlpZ25pdGUgPSBTVU1NT05FUl8xDQoJZWxzZWlmIG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMikubmFtZTpmaW5kKCJzdW1tb25lcmRvdCIpIHRoZW4NCgkJaWduaXRlID0gU1VNTU9ORVJfMg0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEZMb2FkTGliKCkNCglGTWVudSgpDQplbmQNCg0KZnVuY3Rpb24gRk1lbnUoKQ0KCUhhek1lbnUgPSBzY3JpcHRDb25maWcoIkNsYXJpdHkgQWhyaSIsICJBaHJpIikNCgkJSGF6TWVudTphZGRQYXJhbSgiY29tYm9rZXkiLCAiQ29tYm8ga2V5KFNwYWNlKSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCgkJSGF6TWVudTphZGRQYXJhbSgiaGFyYXNza2V5IiwgIkhhcmFzcyBrZXkoQykiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCgkJSGF6TWVudTphZGRQYXJhbSgiZmFybWtleSIsICJGYXJtIGtleShWKSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KCSAgICAJDQoJSGF6TWVudTphZGRUUyh0cykNCgkJDQoJSGF6TWVudTphZGRTdWJNZW51KCJDb21ibyIsICJDb21ibyIpDQoJCUhhek1lbnUuQ29tYm86YWRkUGFyYW0oImNvbWJvUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJSGF6TWVudS5Db21ibzphZGRQYXJhbSgiY29tYm9XIiwgIlVzZSBXIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlIYXpNZW51LkNvbWJvOmFkZFBhcmFtKCJjb21ib0UiLCAiVXNlIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCUhhek1lbnUuQ29tYm86YWRkUGFyYW0oImNvbWJvUiIsICJVc2UgUiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJSGF6TWVudS5Db21ibzphZGRQYXJhbSgiY29tYm9SbSIsICJSIHRvIG1vdXNlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQktLUhhek1lbnUuQ29tYm86YWRkUGFyYW0oInN0dW5RIiwgIlVzZSBRIG9ubHkgaWYgQ2hhcm1lZCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJDQogICAJSGF6TWVudTphZGRTdWJNZW51KCJIYXJhc3MiLCAiSGFyYXNzIikNCgkJSGF6TWVudS5IYXJhc3M6YWRkUGFyYW0oImhhcmFzc1EiLCAiVXNlIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCQkNCgkJSGF6TWVudS5IYXJhc3M6YWRkUGFyYW0oImhhcmFzc1ciLCAiVXNlIFciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICAgIEhhek1lbnUuSGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NFIiwgIlVzZSBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlIYXpNZW51LkhhcmFzczphZGRQYXJhbSgiTWFuYSIsICJNYW5hIE1hbmFnZXIgJSIsIFNDUklQVF9QQVJBTV9TTElDRSwgNTAsIDEsIDEwMCwgMCkNCgkNCglIYXpNZW51OmFkZFN1Yk1lbnUoIk1vcmUiLCAiTW9yZSIpDQoJICAgIEhhek1lbnUuTW9yZTphZGRQYXJhbSgibW92ZXRvIiwgIkVzY2FwZS9DaGFzZSBRIChaKSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWiIpKQ0KCQlpZiBkaXZpbmVQcmVkTG9hZGVkIHRoZW4NCgkJSGF6TWVudS5Nb3JlOmFkZFBhcmFtKCJQcmVkIiwgIlVzZSBEUHJlZCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkgICAgZW5kDQoJICAgIEhhek1lbnUuTW9yZTphZGRQYXJhbSgiYXV0b3BvdCIsICJVc2UgQW90byBwb3RzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlIYXpNZW51Lk1vcmU6YWRkUGFyYW0oImF1dG9SZWQiLCAiQXV0byBwb3QgUkVEICUgSFAiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIwLCAwLCAxMDAgLCAwKQ0KCQlIYXpNZW51Lk1vcmU6YWRkUGFyYW0oImF1dG9CbHVlIiwgIkF1dG8gcG90IEJMVUUgJSBNbiIsIFNDUklQVF9QQVJBTV9TTElDRSwgMjAsIDAsIDEwMCAsIDApDQoJDQogICAgSGF6TWVudTphZGRTdWJNZW51KCJGYXJtIiwgIkZhcm0iKQ0KCSAgICBIYXpNZW51LkZhcm06YWRkUGFyYW0oImZhcm1RIiwgIlVzZSBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlIYXpNZW51LkZhcm06YWRkUGFyYW0oImZhcm1XIiwgIlVzZSBXIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCSAgICBIYXpNZW51LkZhcm06YWRkUGFyYW0oIk1hbmEiLCAiTWFuYSBNYW5hZ2VyICUiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUwLCAxLCAxMDAsIDApDQoJDQoJSGF6TWVudTphZGRTdWJNZW51KCJNaXNjIiwgIk1pc2MiKQ0KCQlIYXpNZW51Lk1pc2M6YWRkUGFyYW0oIktTIiwgIktpbGxTdGVhbCB3aXRoIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCUhhek1lbnUuTWlzYzphZGRQYXJhbSgiSWduaXRlIiwgIlVzZSBBdXRvIElnbml0ZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkgICAgSGF6TWVudS5NaXNjOmFkZFBhcmFtKCJraWxsdGV4dCIsICJLaWxsIFRleHQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCUhhek1lbnUuTWlzYzphZGRQYXJhbSgiemhvbnlhIiwgIkF1dG8gWmhvbnlhcyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkgICAgSGF6TWVudS5NaXNjOmFkZFBhcmFtKCJ6aG9ueWFIUCIsICJVc2UgWmhvbnlhcyBhdCAlIGhlYWx0aCIsIFNDUklQVF9QQVJBTV9TTElDRSwgMjAsIDAsIDEwMCAsIDApDQoJCUhhek1lbnUuTWlzYzphZGRQYXJhbSgiQW1vdW50IiwgIlpob255YSBpZiB4IEVuZW1pZXMiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEsIDAsIDUsIDApDQoJCQ0KCUhhek1lbnU6YWRkU3ViTWVudSgiRHJhdyIsIkRyYXciKQ0KCSAgSGF6TWVudS5EcmF3OmFkZFBhcmFtKCJkcmF3cSIsICJEcmF3IFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICBIYXpNZW51LkRyYXc6YWRkUGFyYW0oImRyYXd3IiwgIkRyYXcgVyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkgIEhhek1lbnUuRHJhdzphZGRQYXJhbSgiZHJhd2UiLCAiRHJhdyBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCSAgSGF6TWVudS5EcmF3OmFkZFBhcmFtKCJkcmF3ciIsICJEcmF3IFIiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICBIYXpNZW51LkRyYXc6YWRkUGFyYW0oImRyYXdIUCIsICJEcmF3IERtZyBvbiBIUEJhciIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkgIC0tSGF6TWVudS5EcmF3OmFkZFBhcmFtKCJkcmF3dCIsICJEcmF3IENpcmNsZSBvbiBUYXJnZXQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICANCgkgIA0KCUhhek1lbnU6YWRkUGFyYW0oIkFHUCIsICJBdXRvIEUgZ2FwY2xvc2VycyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkJDQoJSGF6TWVudTphZGRQYXJhbSgiSW50ZXJydXB0IiwgImludGVycnVwdCB3aXRoIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJDQoJDQoJSGF6TWVudTphZGRTdWJNZW51KCJMYWdGcmVlQ2lyY2xlcyIsICJMRkMiKQ0KCSAgSGF6TWVudS5MRkM6YWRkUGFyYW0oIkxhZ0ZyZWUiLCAiQWN0aXZhdGUgTGFnIEZyZWUgQ2lyY2xlcyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJICBIYXpNZW51LkxGQzphZGRQYXJhbSgiQ0wiLCAiTGVuZ3RoIGJlZm9yZSBTbmFwcGluZyIsIFNDUklQVF9QQVJBTV9TTElDRSwgMzUwLCA3NSwgMjAwMCwgMCkNCgkgIEhhek1lbnUuTEZDOmFkZFBhcmFtKCJDTGluZm8iLCAiSGlnaGVyIGxlbmd0aCA9IExvd2VyIEZQUyBEcm9wcyIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikNCgkNCglmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCwgMSBkbw0KCQlsb2NhbCBlbmVteSA9IGhlcm9NYW5hZ2VyOmdldEhlcm8oaSkNCgkJaWYgZW5lbXkudGVhbSB+PSBteUhlcm8udGVhbSB0aGVuDQoJCQlmb3IgXywgY2hhbXAgaW4gcGFpcnMoSW50ZXJydXB0TGlzdCkgZG8NCgkJCQlpZiBlbmVteS5jaGFyTmFtZSA9PSBjaGFtcC5jaGFyTmFtZSB0aGVuDQoJCQkJCXRhYmxlLmluc2VydChUb0ludGVycnVwdCwgY2hhbXAuc3BlbGxOYW1lKQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQ0KCWlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KCURlbGF5QWN0aW9uKGZ1bmN0aW9uKCkNCgkJUHJpbnRDaGF0KCI8Zm9udCBjb2xvciA9IFwiI0ZGRkZGRlwiPltBaHJpXSA8L2ZvbnQ+PGZvbnQgY29sb3IgPSBcIiNGRjAwMDBcIj5TQUMgU3RhdHVzOjwvZm9udD4gPGZvbnQgY29sb3IgPSBcIiNGRkZGRkZcIj5TdWNjZXNzZnVsbHkgaW50ZWdyYXRlZC48L2ZvbnQ+IDwvZm9udD4iKQ0KCQlIYXpNZW51OmFkZFBhcmFtKCJTQUNPTiIsIltBaHJpXSBTQUM6UiBzdXBwb3J0IGlzIGFjdGl2ZS4iLCA1LCAiIikNCgkJaXNTQUMgPSB0cnVlDQoJZW5kLCAxMCkNCgllbHNlaWYgbm90IF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KCQlQcmludENoYXQoIjxmb250IGNvbG9yID0gXCIjRkZGRkZGXCI+W0FocmldIDwvZm9udD48Zm9udCBjb2xvciA9IFwiI0ZGMDAwMFwiPk9yYndhbGtlciBub3QgZm91bmQ6PC9mb250PiA8Zm9udCBjb2xvciA9IFwiI0ZGRkZGRlwiPlN4T3JiV2FsayBpbnRlZ3JhdGVkLjwvZm9udD4gPC9mb250PiIpDQoJCUhhek1lbnU6YWRkU3ViTWVudSgiT3Jid2Fsa2VyIiwgIlN4T3JiIikNCgkJU3hPcmI6TG9hZFRvTWVudShIYXpNZW51LlN4T3JiKQ0KCQlpc1NYID0gdHJ1ZQ0KCWVuZA0KCUhhek1lbnU6cGVybWFTaG93KCJjb21ib2tleSIpDQoJSGF6TWVudTpwZXJtYVNob3coImhhcmFzc2tleSIpDQoJSGF6TWVudTpwZXJtYVNob3coImZhcm1rZXkiKQ0KZW5kDQoNCg0KDQpmdW5jdGlvbiBLUyhlbmVteSkgIA0KCWlmIFEuSXNSZWFkeSgpIGFuZCBnZXREbWcoIlEiLCBlbmVteSwgbXlIZXJvKSA+IGVuZW15LmhlYWx0aCB0aGVuDQoJCWlmIEdldERpc3RhbmNlKGVuZW15KSA8PSBRLnJhbmdlIGFuZCBIYXpNZW51Lk1pc2MuS1MgdGhlbiANCgkJCWxvY2FsIENhc3RQb3NpdGlvbiwgSGl0Q2hhbmNlLCBDYXN0UG9zID0gVlA6R2V0TGluZUNhc3RQb3NpdGlvbih0YXJnZXQsIFEuZGVsYXksIFEud2lkdGgsIFEucmFuZ2UsIFEuc3BlZWQsIG15SGVybywgZmFsc2UpDQoJCQlpZiBIaXRDaGFuY2UgPj0gMiBhbmQgR2V0RGlzdGFuY2UoQ2FzdFBvc2l0aW9uKSA8PSBRLnJhbmdlIGFuZCBRLklzUmVhZHkoKSB0aGVuDQoJCQkJQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCSAgICBlbmQNCgkJZW5kDQoJZW5kDQogICAgaWYgRS5Jc1JlYWR5KCkgYW5kIGdldERtZygiRSIsIGVuZW15LCBteUhlcm8pID4gZW5lbXkuaGVhbHRoIHRoZW4NCgkJaWYgR2V0RGlzdGFuY2UoZW5lbXkpIDw9IEUucmFuZ2UgYW5kIEhhek1lbnUuTWlzYy5LUyB0aGVuIA0KCQkJbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIENhc3RQb3MgPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHRhcmdldCwgRS5kZWxheSwgRS53aWR0aCwgRS5yYW5nZSwgRS5zcGVlZCwgbXlIZXJvLCB0cnVlKQ0KCQkJaWYgSGl0Q2hhbmNlID49IDIgYW5kIEdldERpc3RhbmNlKENhc3RQb3NpdGlvbikgPD0gRS5yYW5nZSBhbmQgR2V0RGlzdGFuY2UoQ2FzdFBvc2l0aW9uKSA+PSA2MDAgYW5kIEUuSXNSZWFkeSgpIHRoZW4NCgkJCQlDYXN0U3BlbGwoX0UsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCgkJICAgIGVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBBdXRvSWduaXRlKGVuZW15KQ0KICAJaURtZyA9ICgoSVJFQURZIGFuZCBnZXREbWcoIklHTklURSIsIGVuZW15LCBteUhlcm8pKSBvciAwKSANCglpZiBlbmVteS5oZWFsdGggPD0gaURtZyBhbmQgR2V0RGlzdGFuY2UoZW5lbXkpIDw9IDYwMCBhbmQgaWduaXRlIH49IG5pbA0KCQl0aGVuDQoJCQlpZiBJUkVBRFkgdGhlbiBDYXN0U3BlbGwoaWduaXRlLCBlbmVteSkgZW5kDQoJZW5kDQplbmQNCg0KDQotLUJpZyBUTlggdG8gTWFuY2l1enogZm9yIHRoaXMgcGFydA0KDQoNCmZ1bmN0aW9uIE9uUHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKSANCiAgICBpZiB1bml0ID09IG15SGVybyBhbmQgc3BlbGwubmFtZT09Ik9yYm9mRGVjZXB0aW9uQmFjayIgb3Igc3BlbGwubmFtZT09Ik9yYm9mRGVjZXB0aW9uIiB0aGVuDQogICAgICAgIGlmIEhhek1lbnUuY29tYm9rZXkgYW5kIFIuSXNSZWFkeSgpIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpIDw9IDkwMCB0aGVuIA0KCQkgICAgaWYgSGF6TWVudS5Db21iby5jb21ib1JtIHRoZW4NCgkJCSAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIGNhc3RSbSgpICAgZW5kLCAwLjc1KQ0KCQkJZW5kDQogICAgICAgICAgICBlbHNlaWYgbm90IEhhek1lbnUuQ29tYm8uY29tYm9SbSB0aGVuCQ0KICAgICAgICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBjYXN0UigpIGVuZCwgMSkJDQoJCQllbmQgICANCgkgZW5kDQoJCQ0KCWlmIEhhek1lbnUuSW50ZXJydXB0IGFuZCBFLklzUmVhZHkoKSBhbmQgI1RvSW50ZXJydXB0ID4gMCB0aGVuDQoJCWZvciBfLCBhYmlsaXR5IGluIHBhaXJzKFRvSW50ZXJydXB0KSBkbw0KCQkJaWYgc3BlbGwubmFtZSA9PSBhYmlsaXR5IGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gdGhlbg0KCQkJCWlmIEdldERpc3RhbmNlKHVuaXQpIDw9IDgwMCB0aGVuIENhc3RTcGVsbChfRSwgdW5pdC54LCB1bml0LnopIGVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCWlmIEhhek1lbnUuQUdQIGFuZCBFLklzUmVhZHkoKSB0aGVuDQoJICAgICAgICBsb2NhbCBqYXJ2YW5BZGRpdGlvbiA9IHVuaXQuY2hhck5hbWUgPT0gIkphcnZhbklWIiBhbmQgdW5pdDpDYW5Vc2VTcGVsbChfUSkgfj0gUkVBRFkgYW5kIF9SIG9yIF9RDQoJCQlsb2NhbCBpc0FHYXBjbG9zZXJVbml0ID0gew0KCQkJCVsnQWF0cm94J10gICAgICA9IHt0cnVlLCBzcGVsbCA9IF9RLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTAwMCwgIHByb2pTcGVlZCA9IDEyMDAsIH0sDQoJCQkJWydBa2FsaSddICAgICAgID0ge3RydWUsIHNwZWxsID0gX1IsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA4MDAsICAgcHJvalNwZWVkID0gMjIwMCwgfSwgDQoJCQkJWydBbGlzdGFyJ10gICAgID0ge3RydWUsIHNwZWxsID0gX1csICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA2NTAsICAgcHJvalNwZWVkID0gMjAwMCwgfSwgDQoJCQkJWydEaWFuYSddICAgICAgID0ge3RydWUsIHNwZWxsID0gX1IsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA4MjUsICAgcHJvalNwZWVkID0gMjAwMCwgfSwgDQoJCQkJWydHcmFnYXMnXSAgICAgID0ge3RydWUsIHNwZWxsID0gX0UsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA2MDAsICAgcHJvalNwZWVkID0gMjAwMCwgfSwNCgkJCQlbJ0hlY2FyaW0nXSAgICAgPSB7dHJ1ZSwgc3BlbGwgPSBfUiwgICAgICAgICAgICAgICAgICByYW5nZSA9IDEwMDAsICBwcm9qU3BlZWQgPSAxMjAwLCB9LA0KCQkJCVsnSXJlbGlhJ10gICAgICA9IHt0cnVlLCBzcGVsbCA9IF9RLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNjUwLCAgIHByb2pTcGVlZCA9IDIyMDAsIH0sIA0KCQkJCVsnSmFydmFuSVYnXSAgICA9IHt0cnVlLCBzcGVsbCA9IGphcnZhbkFkZGl0aW9uLCAgICAgIHJhbmdlID0gNzcwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnSmF4J10gICAgICAgICA9IHt0cnVlLCBzcGVsbCA9IF9RLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNzAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnSmF5Y2UnXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9ICdKYXljZVRvVGhlU2tpZXMnLCAgIHJhbmdlID0gNjAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnS2hheml4J10gICAgICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gOTAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sDQoJCQkJWydMZWJsYW5jJ10gICAgID0ge3RydWUsIHNwZWxsID0gX1csICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA2MDAsICAgcHJvalNwZWVkID0gMjAwMCwgfSwNCgkJCQlbJ0xlZVNpbiddICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnYmxpbmRtb25rcXR3bycsICAgICByYW5nZSA9IDEzMDAsICBwcm9qU3BlZWQgPSAxODAwLCB9LA0KCQkJCVsnTGVvbmEnXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gOTAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sDQoJCQkJWydNYWxwaGl0ZSddICAgID0ge3RydWUsIHNwZWxsID0gX1IsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxMDAwLCAgcHJvalNwZWVkID0gMTUwMCArIHVuaXQubXN9LA0KCQkJCVsnTWFva2FpJ10gICAgICA9IHt0cnVlLCBzcGVsbCA9IF9RLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNjAwLCAgIHByb2pTcGVlZCA9IDEyMDAsIH0sIA0KCQkJCVsnTW9ua2V5S2luZyddICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNjUwLCAgIHByb2pTcGVlZCA9IDIyMDAsIH0sIA0KCQkJCVsnUGFudGhlb24nXSAgICA9IHt0cnVlLCBzcGVsbCA9IF9XLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNjAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnUG9wcHknXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNTI1LCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnUmVuZWt0b24nXSAgICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNDUwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sDQoJCQkJWydTZWp1YW5pJ10gICAgID0ge3RydWUsIHNwZWxsID0gX1EsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA2NTAsICAgcHJvalNwZWVkID0gMjAwMCwgfSwNCgkJCQlbJ1NoZW4nXSAgICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSBfRSwgICAgICAgICAgICAgICAgICByYW5nZSA9IDU3NSwgICBwcm9qU3BlZWQgPSAyMDAwLCB9LA0KCQkJCVsnVHJpc3RhbmEnXSAgICA9IHt0cnVlLCBzcGVsbCA9IF9XLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gOTAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sDQoJCQkJWydUcnluZGFtZXJlJ10gID0ge3RydWUsIHNwZWxsID0gJ1NsYXNoJywgICAgICAgICAgICAgcmFuZ2UgPSA2NTAsICAgcHJvalNwZWVkID0gMTQ1MCwgfSwNCgkJCQlbJ1hpblpoYW8nXSAgICAgPSB7dHJ1ZSwgc3BlbGwgPSBfRSwgICAgICAgICAgICAgICAgICByYW5nZSA9IDY1MCwgICBwcm9qU3BlZWQgPSAyMDAwLCB9LCANCgkJCX0NCgkJCWlmIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgdW5pdC50ZWFtIH49IG15SGVyby50ZWFtIGFuZCBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IDIwMDAgYW5kIHNwZWxsIH49IG5pbCB0aGVuDQoJCQkJaWYgc3BlbGwubmFtZSA9PSAodHlwZShpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKSA9PSAnbnVtYmVyJyBhbmQgdW5pdDpHZXRTcGVsbERhdGEoaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkubmFtZSBvciBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKSB0aGVuDQoJCQkJCWlmIHNwZWxsLnRhcmdldCB+PSBuaWwgYW5kIHNwZWxsLnRhcmdldC5pc01lIG9yIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwgPT0gJ2JsaW5kbW9ua3F0d28nIHRoZW4NCgkJCQkJCWlmIEUuSXNSZWFkeSgpIHRoZW4NCgkJCQkJCQlFLnRhcmdldCA9IHVuaXQNCgkJCQkJCQlDYXN0U3BlbGwoX0UsIHVuaXQueCwgdW5pdC56KQ0KCQkJCQkJZW5kDQoJCQkJCWVsc2UNCgkJCQkJCXNwZWxsRXhwaXJlZCA9IGZhbHNlDQoJCQkJCQlpbmZvcm1hdGlvblRhYmxlID0gew0KCQkJCQkJCXNwZWxsU291cmNlID0gdW5pdCwNCgkJCQkJCQlzcGVsbENhc3RlZFRpY2sgPSBHZXRUaWNrQ291bnQoKSwNCgkJCQkJCQlzcGVsbFN0YXJ0UG9zID0gUG9pbnQoc3BlbGwuc3RhcnRQb3MueCwgc3BlbGwuc3RhcnRQb3MueiksDQoJCQkJCQkJc3BlbGxFbmRQb3MgPSBQb2ludChzcGVsbC5lbmRQb3MueCwgc3BlbGwuZW5kUG9zLnopLA0KCQkJCQkJCXNwZWxsUmFuZ2UgPSBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnJhbmdlLA0KCQkJCQkJCXNwZWxsU3BlZWQgPSBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnByb2pTcGVlZA0KCQkJCQkJfQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQkNCiAgICBlbmQNCiAgICANCmVuZAkJCQ0KDQoNCg0KZnVuY3Rpb24gU3BlbGxFeHBpcmVkKCkNCglpZiBIYXpNZW51LkFHUCBhbmQgbm90IHNwZWxsRXhwaXJlZCBhbmQgKEdldFRpY2tDb3VudCgpIC0gaW5mb3JtYXRpb25UYWJsZS5zcGVsbENhc3RlZFRpY2spIDw9IChpbmZvcm1hdGlvblRhYmxlLnNwZWxsUmFuZ2UgLyBpbmZvcm1hdGlvblRhYmxlLnNwZWxsU3BlZWQpICogMTAwMCB0aGVuDQoJCWxvY2FsIHNwZWxsRGlyZWN0aW9uICAgICA9IChpbmZvcm1hdGlvblRhYmxlLnNwZWxsRW5kUG9zIC0gaW5mb3JtYXRpb25UYWJsZS5zcGVsbFN0YXJ0UG9zKTpub3JtYWxpemVkKCkNCgkJbG9jYWwgc3BlbGxTdGFydFBvc2l0aW9uID0gaW5mb3JtYXRpb25UYWJsZS5zcGVsbFN0YXJ0UG9zICsgc3BlbGxEaXJlY3Rpb24NCgkJbG9jYWwgc3BlbGxFbmRQb3NpdGlvbiAgID0gaW5mb3JtYXRpb25UYWJsZS5zcGVsbFN0YXJ0UG9zICsgc3BlbGxEaXJlY3Rpb24gKiBpbmZvcm1hdGlvblRhYmxlLnNwZWxsUmFuZ2UNCgkJbG9jYWwgaGVyb1Bvc2l0aW9uID0gUG9pbnQobXlIZXJvLngsIG15SGVyby56KQ0KCQlsb2NhbCBsaW5lU2VnbWVudCA9IExpbmVTZWdtZW50KFBvaW50KHNwZWxsU3RhcnRQb3NpdGlvbi54LCBzcGVsbFN0YXJ0UG9zaXRpb24ueSksIFBvaW50KHNwZWxsRW5kUG9zaXRpb24ueCwgc3BlbGxFbmRQb3NpdGlvbi55KSkNCgkNCgkJCWxvY2FsIGxpbmVTZWdtZW50ID0gTGluZVNlZ21lbnQoUG9pbnQoc3BlbGxTdGFydFBvc2l0aW9uLngsIHNwZWxsU3RhcnRQb3NpdGlvbi55KSwgUG9pbnQoc3BlbGxFbmRQb3NpdGlvbi54LCBzcGVsbEVuZFBvc2l0aW9uLnkpKQ0KCQkJDQoNCgkJCWlmIGxpbmVTZWdtZW50OmRpc3RhbmNlKGhlcm9Qb3NpdGlvbikgPD0gNDAwIGFuZCBFLklzUmVhZHkoKSB0aGVuDQoJCQkJRS50YXJnZXQgPSB1bml0DQoJCQkJQ2FzdFNwZWxsKF9FLCB1bml0LngsIHVuaXQueikNCgkJCWVuZA0KDQoJCWVsc2UNCgkJCXNwZWxsRXhwaXJlZCA9IHRydWUNCgkJCWluZm9ybWF0aW9uVGFibGUgPSB7fQ0KCQllbmQNCiAgICAgICAgDQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIA0KICAgIA0KZW5kDQoNCg0KLS1jb21iby0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCg0KZnVuY3Rpb24gQ29tYm8oKQ0KCWlmIFZhbGlkVGFyZ2V0KHRhcmdldCkgdGhlbg0KICAgICAgICAJDQoJCQkNCgkJCSAgICBpZiBSLklzUmVhZHkoKSBhbmQgSGF6TWVudS5Db21iby5jb21ib1IgdGhlbg0KCQkJICAgICAgICBpZiBIYXpNZW51LkNvbWJvLmNvbWJvUm0gdGhlbg0KCQkJCSAgICAgIGNhc3RSbSgpDQoJCQkJICAgICANCgkJCSAgICAgZWxzZWlmIG5vdCBIYXpNZW51LkNvbWJvLmNvbWJvUm0gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgY2FzdFIoKSAgCQ0KCQkJICAgICAgICBlbmQNCgkJCQllbmQNCgkJCWlmIEUuSXNSZWFkeSgpIGFuZCBIYXpNZW51LkNvbWJvLmNvbWJvRSB0aGVuDQoJCQkgIGlmIEdldERpc3RhbmNlKHRhcmdldCkgPD0gRS5yYW5nZSB0aGVuIA0KCQkJCWlmIEhhek1lbnUuTW9yZS5QcmVkIHRoZW4NCgkJICAgICAgICAgICAgDQoJCQkgICAgICAgIGRpdmluZUUoKQ0KICAgICAgICAgICAgICAgIA0KCQkJCWVsc2VpZiBub3QgSGF6TWVudS5Nb3JlLlByZWQgdGhlbgkJDQoJCQkgICAgICAgICBsb2NhbCBDYXN0UG9zaXRpb24sIEhpdENoYW5jZSwgQ2FzdFBvcyA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odGFyZ2V0LCBFLmRlbGF5LCBFLndpZHRoLCBFLnJhbmdlLCBFLnNwZWVkLCBteUhlcm8sIHRydWUpDQoJCQkgICAgICAgICBpZiBIaXRDaGFuY2UgPj0gMiBhbmQgR2V0RGlzdGFuY2UoQ2FzdFBvc2l0aW9uKSA8PSBFLnJhbmdlIGFuZCBFLklzUmVhZHkoKSB0aGVuDQoJCQkJICAgICAgICBDYXN0U3BlbGwoX0UsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCgkJICAgICAgICAgICAgIGVuZA0KCQkgICAgICAgIGVuZA0KCQkJZW5kCQ0KCQkJZW5kCQ0KICAgICAgICAgICAgICAgIGlmIFEuSXNSZWFkeSgpIGFuZCBIYXpNZW51LkNvbWJvLmNvbWJvUSB0aGVuDQoJCQkJICAgICAgaWYgSGF6TWVudS5Nb3JlLlByZWQgdGhlbg0KCQkJCQkgIGRpdmluZVEoKQ0KCQkJCQkgIA0KCQkJCQkgIGVsc2VpZiBub3QgSGF6TWVudS5Nb3JlLlByZWQgdGhlbg0KCQkJCSAgCSAgICBsb2NhbCBDYXN0UG9zaXRpb24sIEhpdENoYW5jZSwgQ2FzdFBvcyA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odGFyZ2V0LCBRLmRlbGF5LCBRLndpZHRoLCBRLnJhbmdlLCBRLnNwZWVkLCBteUhlcm8sIGZhbHNlKQ0KCQkJICAgICAgICAgICAgaWYgSGl0Q2hhbmNlID49IDIgYW5kIEdldERpc3RhbmNlKENhc3RQb3NpdGlvbikgPD0gUS5yYW5nZSB0aGVuCQkJIA0KCQkJCSAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopCQkJCQ0KCQkJICAgICAgICAgICAgZW5kICAgICAgICAgICANCgkJCQkNCgkJCQllbmQJDQoJCQktLWVsc2VpZiBub3QgSGF6TWVudS5Db21iby5zdHVuUSB0aGVuDQoJCQkgICAgZW5kIA0KCSAgICAgICAgaWYgVy5Jc1JlYWR5KCkgYW5kIEhhek1lbnUuQ29tYm8uY29tYm9XIHRoZW4NCgkJCSAgICBpZiBHZXREaXN0YW5jZShteUhlcm8sIHRhcmdldCkgPD0gIDU1MCB0aGVuDQoJCQkgICAgICAgQ2FzdFNwZWxsKF9XKQ0KCQkJICAgIGVuZA0KCQkJZW5kDQoJZW5kCQ0KZW5kDQoNCg0KDQotLWhhcmFzcy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQoNCg0KZnVuY3Rpb24gUG9rZSgpDQoJaWYgVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQoJICAgIGlmIEUuSXNSZWFkeSgpIGFuZCBIYXpNZW51LkhhcmFzcy5oYXJhc3NFIHRoZW4NCgkJCSAgICAgaWYgR2V0RGlzdGFuY2UodGFyZ2V0KSA8PSBFLnJhbmdlIHRoZW4gDQoJCQkJICAgIGlmIEhhek1lbnUuTW9yZS5QcmVkIHRoZW4NCgkJICAgICAgICAgICAgDQoJCQkgICAgICAgIGRpdmluZUUoKQ0KICAgICAgICAgICAgICAgICAgICANCgkJCQllbHNlaWYgbm90IEhhek1lbnUuTW9yZS5QcmVkIHRoZW4JCQkJCSAgICAgICAgIA0KCQkJICAgICAgICAgbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIENhc3RQb3MgPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHRhcmdldCwgRS5kZWxheSwgRS53aWR0aCwgRS5yYW5nZSwgRS5zcGVlZCwgbXlIZXJvLCB0cnVlKQ0KCQkJICAgICAgICAgaWYgSGl0Q2hhbmNlID49IDIgYW5kIEdldERpc3RhbmNlKENhc3RQb3NpdGlvbikgPD0gRS5yYW5nZSBhbmQgRS5Jc1JlYWR5KCkgdGhlbg0KCQkJCSAgICAgICAgQ2FzdFNwZWxsKF9FLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCSAgICAgICAgICAgICBlbmQNCgkJICAgICAgICAgICAgZW5kDQoJCQkgICAgZW5kCQ0KCQllbmQJCQ0KCQlpZiBRLklzUmVhZHkoKSBhbmQgSGF6TWVudS5IYXJhc3MuaGFyYXNzUSBhbmQgbXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IEhhek1lbnUuSGFyYXNzLk1hbmEgLzEwMCB0aGVuDQoJCSAgICBpZiBIYXpNZW51Lk1vcmUuUHJlZCB0aGVuDQoJCQkJIGRpdmluZVEoKQ0KCQkJDQoJCQllbHNlaWYgbm90IEhhek1lbnUuTW9yZS5QcmVkIHRoZW4NCgkJICAgIGxvY2FsIENhc3RQb3NpdGlvbiwgSGl0Q2hhbmNlLCBDYXN0UG9zID0gVlA6R2V0TGluZUNhc3RQb3NpdGlvbih0YXJnZXQsIFEuZGVsYXksIFEud2lkdGgsIFEucmFuZ2UsIFEuc3BlZWQsIG15SGVybywgZmFsc2UpDQoJCQlpZiBIaXRDaGFuY2UgPj0gMiBhbmQgR2V0RGlzdGFuY2UoQ2FzdFBvc2l0aW9uKSA8PSBRLnJhbmdlIHRoZW4JCQkJIA0KCQkJICAgQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopCQkJCQ0KCQkJZW5kDQoJCSAgICBlbmQNCgkJZW5kCQ0KCQlpZiBXLklzUmVhZHkoKSBhbmQgSGF6TWVudS5IYXJhc3MuaGFyYXNzVyB0aGVuDQoJCSAgICBpZiBteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gSGF6TWVudS5IYXJhc3MuTWFuYSAvMTAwIHRoZW4NCgkJICAgICAgIGlmIEdldERpc3RhbmNlKG15SGVybywgdGFyZ2V0KSA8PSA1NTAgdGhlbg0KCQkJICAgICBDYXN0U3BlbGwoX1cpDQoJCQkgICAgZW5kICAJCSAgICANCgkJICAgIGVuZA0KCSAgICBlbmQNCiAgICBlbmQNCmVuZA0KDQoNCg0KLS1mYXJtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQoNCmZ1bmN0aW9uIEZhcm0oKQ0KCU1pbmlvbnM6dXBkYXRlKCkNCgkNCglmb3IgaSwgTWluaW9uIGluIHBhaXJzKE1pbmlvbnMub2JqZWN0cykgZG8NCgkJaWYgUS5Jc1JlYWR5KCkgYW5kIEhhek1lbnUuRmFybS5mYXJtUSBhbmQgI01pbmlvbnMub2JqZWN0cyA+IDIgdGhlbg0KCQkJaWYgbXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IEhhek1lbnUuRmFybS5NYW5hIC8xMDAgdGhlbg0KCQkJICAgIGlmIFZhbGlkVGFyZ2V0KE1pbmlvbikgdGhlbg0KCQkJICAgICAgICBsb2NhbCBBT0VDYXN0UG9zaXRpb24sIE1haW5UYXJnZXRIaXRDaGFuY2UsIG5UYXJnZXRzID0gVlA6R2V0TGluZUFPRUNhc3RQb3NpdGlvbihNaW5pb24sIFEuZGVsYXksIFEud2lkdGgsIDc1MCwgUS5zcGVlZCwgbXlIZXJvKQ0KCQkJICAgICAgICBpZiBuVGFyZ2V0cyA+PSAxIGFuZCBRLklzUmVhZHkoKSB0aGVuDQoJCQkgICAgICAgICAgIENhc3RTcGVsbChfUSwgQU9FQ2FzdFBvc2l0aW9uLngsIEFPRUNhc3RQb3NpdGlvbi56KQ0KCQkJICAgICAgICBlbmQNCgkJCQllbmQJDQoJCQllbmQNCiAgIAkJZW5kDQoJCWlmICBXLklzUmVhZHkoKSBhbmQgSGF6TWVudS5GYXJtLmZhcm1XIHRoZW4NCgkJICAgIGlmIG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBIYXpNZW51LkZhcm0uTWFuYSAvMTAwIHRoZW4NCgkJICAgICAgIGlmIEdldERpc3RhbmNlKG15SGVybywgTWluaW9uKSA8PSBXLnJhbmdlIHRoZW4NCgkJCSAgICAgQ2FzdFNwZWxsKF9XKQ0KCQkJICAgIGVuZA0KICAgCQkgICAgDQoJCSAgICBlbmQNCgkgICAgZW5kDQoJZW5kCQ0KICAgIEp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCglmb3IgaSwgTWluaW9uIGluIHBhaXJzKEp1bmdsZU1pbmlvbnMub2JqZWN0cykgZG8NCgkgICAgaWYgUS5Jc1JlYWR5KCkgYW5kIEhhek1lbnUuRmFybS5mYXJtUSB0aGVuDQoJCQlpZiBteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gSGF6TWVudS5GYXJtLk1hbmEgLzEwMCB0aGVuDQoJCQkgICAgbG9jYWwgQU9FQ2FzdFBvc2l0aW9uLCBNYWluVGFyZ2V0SGl0Q2hhbmNlLCBuVGFyZ2V0cyA9IFZQOkdldExpbmVBT0VDYXN0UG9zaXRpb24oTWluaW9uLCBRLmRlbGF5LCBRLndpZHRoLCBFLnJhbmdlLCBRLnNwZWVkLCBteUhlcm8pDQoJCQkgICAgIGlmIG5UYXJnZXRzID49IDEgdGhlbg0KCQkJICAgICAgICBDYXN0U3BlbGwoX1EsIEFPRUNhc3RQb3NpdGlvbi54LCBBT0VDYXN0UG9zaXRpb24ueikNCgkJCSAgICBlbmQNCgkJCWVuZA0KICAgCQllbmQNCgkJaWYgIFcuSXNSZWFkeSgpIGFuZCBIYXpNZW51LkZhcm0uZmFybVcgdGhlbg0KCQkgICAgaWYgbXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IEhhek1lbnUuRmFybS5NYW5hIC8xMDAgdGhlbg0KCQkgICAgICAgDQoJCQkgICAgIENhc3RTcGVsbChfVykNCgkJCSAgICAgICAJCSAgICANCgkJICAgIGVuZA0KCSAgICBlbmQNCgllbmQJDQplbmQNCg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tRGl2aW5lRS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KZnVuY3Rpb24gZGl2aW5lRSgpDQpsb2NhbCB0YXJnZXQgPSBEUFRhcmdldCh0YXJnZXQpDQoJCQkgICAgICAgIGxvY2FsIEFocmlFID0gTGluZVNTKEUuc3BlZWQsIEUucmFuZ2UsIEUud2lkdGgsIChFLmRlbGF5KjEwMDApLCAwKQ0KCQkJICAgICAgICBsb2NhbCBTdGF0ZSwgUG9zaXRpb24sIHBlcmMgPSBEUDpwcmVkaWN0KHRhcmdldCwgQWhyaUUpDQoJCQkgICAgICAgIGlmIFN0YXRlID09IFNraWxsU2hvdC5TVEFUVVMuU1VDQ0VTU19ISVQgdGhlbiANCgkJCQkNCiAgICAgICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX0UsIFBvc2l0aW9uLngsIFBvc2l0aW9uLnopDQoNCgkJCQkgICAgZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBkaXZpbmVRKCkNCmxvY2FsIHRhcmdldCA9IERQVGFyZ2V0KHRhcmdldCkNCgkJCSAgICAgICAgbG9jYWwgQWhyaVEgPSBMaW5lU1MoUS5zcGVlZCwgUS5yYW5nZSwgUS53aWR0aCwgKFEuZGVsYXkqMTAwMCksIG1hdGguaHVnZSkNCgkJCSAgICAgICAgbG9jYWwgU3RhdGUsIFBvc2l0aW9uLCBwZXJjID0gRFA6cHJlZGljdCh0YXJnZXQsIEFocmlRKQ0KCQkJICAgICAgICBpZiBTdGF0ZSA9PSBTa2lsbFNob3QuU1RBVFVTLlNVQ0NFU1NfSElUIHRoZW4gDQoJCQkJDQogICAgICAgICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBQb3NpdGlvbi54LCBQb3NpdGlvbi56KQ0KDQoJCQkJICAgIGVuZA0KZW5kDQoNCg0KLS1jYWxjZG1nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpmdW5jdGlvbiBjYWxjRG1nKCkNCglmb3IgaT0xLCBoZXJvTWFuYWdlci5pQ291bnQgZG8NCgkJbG9jYWwgVGFyZ2V0ID0gaGVyb01hbmFnZXI6R2V0SGVybyhpKQ0KCQlpZiBWYWxpZFRhcmdldChUYXJnZXQpIGFuZCBUYXJnZXQgfj0gbmlsIHRoZW4NCgkJCXFEbWcgPSAoKFFSRUFEWSBhbmQgZ2V0RG1nKCJRIiwgVGFyZ2V0LCBteUhlcm8pKSBvciAwKQ0KCQkJd0RtZyA9ICgoV1JFQURZIGFuZCBnZXREbWcoIlciLCBUYXJnZXQsIG15SGVybykpIG9yIDApDQoJCQllRG1nID0gKChFUkVBRFkgYW5kIGdldERtZygiRSIsIFRhcmdldCwgbXlIZXJvKSkgb3IgMCkNCgkJCXJEbWcgPSAoKFJSRUFEWSBhbmQgZ2V0RG1nKCJSIiwgVGFyZ2V0LCBteUhlcm8pKSBvciAwKQ0KCQkJYWxsRG1nID0gKChxRG1nKSoyKSArICgod0RtZykqMykgKyAoZURtZykgKyAoKHJEbWcpKjMpDQoJCQkNCgkJCWlmIFRhcmdldC5oZWFsdGggPiBhbGxEbWcgdGhlbg0KCQkJCUtpbGxUZXh0W2ldID0gMQ0KCQkJZWxzZWlmIFRhcmdldC5oZWFsdGggPD0gYWxsRG1nIHRoZW4NCgkJCQlLaWxsVGV4dFtpXSA9IDINCgkJCWVuZA0KCQllbmQNCgllbmQJDQplbmQNCg0KZnVuY3Rpb24gTEZDZnVuYygpDQoJaWYgbm90IEhhek1lbnUuTEZDLkxhZ0ZyZWUgdGhlbiBfRy5EcmF3Q2lyY2xlID0gX0cub2xkRHJhd0NpcmNsZSBlbmQNCiAgICBpZiBIYXpNZW51LkxGQy5MYWdGcmVlIHRoZW4gX0cuRHJhd0NpcmNsZSA9IERyYXdDaXJjbGUyIGVuZA0KZW5kDQoNCi0tIEJhcmFzaWEsIHZhZGFzaCwgdmlzZXZlcnNhDQoNCmZ1bmN0aW9uIERyYXdDaXJjbGVOZXh0THZsKHgsIHksIHosIHJhZGl1cywgd2lkdGgsIGNvbG9yLCBjaG9yZGxlbmd0aCkNCglyYWRpdXMgPSByYWRpdXMgb3IgMzAwDQoJcXVhbGl0eSA9IG1hdGgubWF4KDgscm91bmQoMTgwL21hdGguZGVnKChtYXRoLmFzaW4oKGNob3JkbGVuZ3RoLygyKnJhZGl1cykpKSkpKSkNCglxdWFsaXR5ID0gMiAqIG1hdGgucGkgLyBxdWFsaXR5DQoJcmFkaXVzID0gcmFkaXVzKi45Mg0KCWxvY2FsIHBvaW50cyA9IHt9DQoJZm9yIHRoZXRhID0gMCwgMiAqIG1hdGgucGkgKyBxdWFsaXR5LCBxdWFsaXR5IGRvDQoJCWxvY2FsIGMgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHggKyByYWRpdXMgKiBtYXRoLmNvcyh0aGV0YSksIHksIHogLSByYWRpdXMgKiBtYXRoLnNpbih0aGV0YSkpKQ0KCQlwb2ludHNbI3BvaW50cyArIDFdID0gRDNEWFZFQ1RPUjIoYy54LCBjLnkpDQoJZW5kDQoJRHJhd0xpbmVzMihwb2ludHMsIHdpZHRoIG9yIDEsIGNvbG9yIG9yIDQyOTQ5NjcyOTUpDQplbmQNCg0KZnVuY3Rpb24gcm91bmQobnVtKSANCglpZiBudW0gPj0gMCB0aGVuIHJldHVybiBtYXRoLmZsb29yKG51bSsuNSkgZWxzZSByZXR1cm4gbWF0aC5jZWlsKG51bS0uNSkgZW5kDQplbmQNCg0KZnVuY3Rpb24gRHJhd0NpcmNsZTIoeCwgeSwgeiwgcmFkaXVzLCBjb2xvcikNCglsb2NhbCB2UG9zMSA9IFZlY3Rvcih4LCB5LCB6KQ0KCWxvY2FsIHZQb3MyID0gVmVjdG9yKGNhbWVyYVBvcy54LCBjYW1lcmFQb3MueSwgY2FtZXJhUG9zLnopDQoJbG9jYWwgdFBvcyA9IHZQb3MxIC0gKHZQb3MxIC0gdlBvczIpOm5vcm1hbGl6ZWQoKSAqIHJhZGl1cw0KCWxvY2FsIHNQb3MgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHRQb3MueCwgdFBvcy55LCB0UG9zLnopKQ0KCWlmIE9uU2NyZWVuKHsgeCA9IHNQb3MueCwgeSA9IHNQb3MueSB9LCB7IHggPSBzUG9zLngsIHkgPSBzUG9zLnkgfSkgdGhlbg0KCQlEcmF3Q2lyY2xlTmV4dEx2bCh4LCB5LCB6LCByYWRpdXMsIDEsIGNvbG9yLCBIYXpNZW51LkxGQy5DTCkgDQoJZW5kDQplbmQNCg0KDQotLUhQYmFyIGRyYXdzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQoNCmZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBlbmVteS5iYXJEYXRhID0ge1BlcmNlbnRhZ2VPZmZzZXQgPSB7eCA9IDAsIHkgPSAwfSB9DQplbmQNCg0KZnVuY3Rpb24gR2V0RW5lbXlIUEJhclBvcyhlbmVteSkNCg0KICAgIGlmIG5vdCBlbmVteS5iYXJEYXRhIHRoZW4NCiAgICAgICAgcmV0dXJuDQogICAgZW5kDQoNCiAgICBsb2NhbCBiYXJQb3MgPSBHZXRVbml0SFBCYXJQb3MoZW5lbXkpDQogICAgbG9jYWwgYmFyUG9zT2Zmc2V0ID0gR2V0VW5pdEhQQmFyT2Zmc2V0KGVuZW15KQ0KICAgIGxvY2FsIGJhck9mZnNldCA9IFBvaW50KGVuZW15LmJhckRhdGEuUGVyY2VudGFnZU9mZnNldC54LCBlbmVteS5iYXJEYXRhLlBlcmNlbnRhZ2VPZmZzZXQueSkNCiAgICBsb2NhbCBiYXJQb3NQZXJjZW50YWdlT2Zmc2V0ID0gUG9pbnQoZW5lbXkuYmFyRGF0YS5QZXJjZW50YWdlT2Zmc2V0LngsIGVuZW15LmJhckRhdGEuUGVyY2VudGFnZU9mZnNldC55KQ0KDQogICAgbG9jYWwgQmFyUG9zT2Zmc2V0WCA9IDE2OQ0KICAgIGxvY2FsIEJhclBvc09mZnNldFkgPSA0Nw0KICAgIGxvY2FsIENvcnJlY3Rpb25YID0gMTYNCiAgICBsb2NhbCBDb3JyZWN0aW9uWSA9IDQNCg0KICAgIGJhclBvcy54ID0gYmFyUG9zLnggKyAoYmFyUG9zT2Zmc2V0LnggLSAwLjUgKyBiYXJQb3NQZXJjZW50YWdlT2Zmc2V0LngpICogQmFyUG9zT2Zmc2V0WCArIENvcnJlY3Rpb25YDQogICAgYmFyUG9zLnkgPSBiYXJQb3MueSArIChiYXJQb3NPZmZzZXQueSAtIDAuNSArIGJhclBvc1BlcmNlbnRhZ2VPZmZzZXQueSkgKiBCYXJQb3NPZmZzZXRZICsgQ29ycmVjdGlvblkgDQoNCiAgICBsb2NhbCBTdGFydFBvcyA9IFBvaW50KGJhclBvcy54LCBiYXJQb3MueSkNCiAgICBsb2NhbCBFbmRQb3MgPSBQb2ludChiYXJQb3MueCArIDEwMywgYmFyUG9zLnkpDQoNCiAgICByZXR1cm4gUG9pbnQoU3RhcnRQb3MueCwgU3RhcnRQb3MueSksIFBvaW50KEVuZFBvcy54LCBFbmRQb3MueSkNCg0KZW5kDQoNCg0KZnVuY3Rpb24gRHJhd0luZGljYXRvcihlbmVteSkNCglsb2NhbCBRZG1nLCBXZG1nLCBFZG1nLCBSZG1nLCBBQWRtZyA9IGdldERtZygiUSIsIGVuZW15LCBteUhlcm8pLCBnZXREbWcoIlciLCBlbmVteSwgbXlIZXJvKSwgZ2V0RG1nKCJFIiwgZW5lbXksIG15SGVybyksIGdldERtZygiUiIsIGVuZW15LCBteUhlcm8pLCBnZXREbWcoIkFEIiwgZW5lbXksIG15SGVybykNCgkNCglRZG1nID0gKChRLklzUmVhZHkgYW5kIFFkbWcpIG9yIDApDQoJV2RtZyA9ICgoVy5Jc1JlYWR5IGFuZCBXZG1nKSBvciAwKQ0KCUVkbWcgPSAoKEUuSXNSZWFkeSBhbmQgRWRtZykgb3IgMCkNCglSZG1nID0gKChSLklzUmVhZHkgYW5kIFJkbWcpIG9yIDApDQoJQUFkbWcgPSAoKEFhZG1nKSBvciAwKQ0KDQogICAgbG9jYWwgZGFtYWdlID0gKChRZG1nKSoyKSArICgoV2RtZykqMykgKyAoRWRtZykgKyAoKFJkbWcpKjMpDQoNCiAgICBsb2NhbCBTUG9zLCBFUG9zID0gR2V0RW5lbXlIUEJhclBvcyhlbmVteSkNCg0KICAgIGlmIG5vdCBTUG9zIHRoZW4gcmV0dXJuIGVuZA0KDQogICAgbG9jYWwgYmFyd2lkdGggPSBFUG9zLnggLSBTUG9zLngNCiAgICBsb2NhbCBQb3NpdGlvbiA9IFNQb3MueCArIG1hdGgubWF4KDAsIChlbmVteS5oZWFsdGggLSBkYW1hZ2UpIC8gZW5lbXkubWF4SGVhbHRoKSAqIGJhcndpZHRoDQoNCglEcmF3VGV4dCgifCIsIDE2LCBtYXRoLmZsb29yKFBvc2l0aW9uKSwgbWF0aC5mbG9vcihTUG9zLnkgKyA4KSwgQVJHQigyNTUsMCwyNTUsMCkpDQogICAgRHJhd1RleHQoIkhQOiAiLi5tYXRoLmZsb29yKGVuZW15LmhlYWx0aCAtIGRhbWFnZSksIDEyLCBtYXRoLmZsb29yKFNQb3MueCArIDI1KSwgbWF0aC5mbG9vcihTUG9zLnkgLSAxNSksIChlbmVteS5oZWFsdGggLSBkYW1hZ2UpID4gMCBhbmQgQVJHQigyNTUsIDAsIDI1NSwgMCkgb3IgIEFSR0IoMjU1LCAyNTUsIDAsIDApKQ0KZW5kDQoNCg0KLS1zaW5nbGUgc3BlbGxzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQoNCmZ1bmN0aW9uIGNhc3RRKCkNCiAgICBpZiBWYWxpZFRhcmdldChUYXJnZXQpIHRoZW4NCiAgIAkgICAgaWYgUS5Jc1JlYWR5KCkgdGhlbg0KCSAgICAgICAgbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIENhc3RQb3MgPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHRhcmdldCwgUS5kZWxheSwgUS53aWR0aCwgUS5yYW5nZSwgUS5zcGVlZCwgbXlIZXJvLCBmYWxzZSkNCgkJCWlmIEhpdENoYW5jZSA+PSAyIGFuZCBHZXREaXN0YW5jZShDYXN0UG9zaXRpb24pIDw9IFEucmFuZ2UgdGhlbg0KCQkJCSAtLWlmIEhhek1lbnUuTWlzYy5QYWsgYW5kIFZJUF9VU0VSIHRoZW4NCgkJCQkgICAgIC0tcGFja2V0Q2FzdChfUSwgQ2FzdFBvc2l0aW9uLngsIENhc3RQb3NpdGlvbi56KQ0KCQkJCQktLWVsc2UNCgkJCQkgICAgQ2FzdFNwZWxsKF9RLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCQkJLS1lbmQNCgkJCWVuZCAgIA0KCQllbmQNCiAgICBlbmQNCmVuZA0KDQoNCg0KZnVuY3Rpb24gY2FzdEUoKQ0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCkgdGhlbiANCgkgICAgaWYgRS5Jc1JlYWR5KCkgdGhlbg0KCQkJICAgICBpZiBHZXREaXN0YW5jZShlbmVteSkgPD0gRS5yYW5nZSB0aGVuIA0KCQkJICAgICAgICAgbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIENhc3RQb3MgPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHRhcmdldCwgRS5kZWxheSwgRS53aWR0aCwgRS5yYW5nZSwgRS5zcGVlZCwgbXlIZXJvLCB0cnVlKQ0KCQkJICAgICAgICAgaWYgSGl0Q2hhbmNlID49IDIgYW5kIEdldERpc3RhbmNlKENhc3RQb3NpdGlvbikgPD0gRS5yYW5nZSBhbmQgRS5Jc1JlYWR5KCkgdGhlbg0KCQkJCSAgICAgICAgQ2FzdFNwZWxsKF9FLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCSAgICAgICAgICAgICBlbmQNCgkJICAgICAgICBlbmQNCgkJZW5kCQ0KCWVuZA0KCSAgICANCgkNCmVuZA0KDQoNCg0KZnVuY3Rpb24gY2FzdFIoKQ0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCkgdGhlbiANCgkgICAgaWYgUi5Jc1JlYWR5KCkgdGhlbg0KCQkJICAgIGlmIEdldERpc3RhbmNlKHRhcmdldCkgPD0gUS5yYW5nZSB0aGVuIA0KCQkJICAgICAgICBDYXN0U3BlbGwoX1IsIHRhcmdldC54LCB0YXJnZXQueikNCgkJICAgICAgICBlbmQNCgkJZW5kCQ0KCWVuZA0KZW5kDQoNCg0KZnVuY3Rpb24gY2FzdFJtKCkNCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQpIHRoZW4gDQoJICAgIGlmIFIuSXNSZWFkeSgpIHRoZW4NCiAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKHRhcmdldCkgPD0gUS5yYW5nZSB0aGVuIA0KCQkJbG9jYWwgTW91c2UgPSBWZWN0b3IobXlIZXJvKSArIDQwMCAqIChWZWN0b3IobW91c2VQb3MpIC0gVmVjdG9yKG15SGVybykpOm5vcm1hbGl6ZWQoKQ0KCQkJQ2FzdFNwZWxsKF9SLCBNb3VzZS54LCBNb3VzZS56KSANCgkJCWVuZCAgIA0KCSAgICBlbmQNCgllbmQJDQplbmQNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVpob255YS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCg0KZnVuY3Rpb24gR2V0U2xvdEl0ZW0oaWQsIHVuaXQpDQoJDQoJdW5pdCAJCT0gdW5pdCBvciBteUhlcm8NCg0KCWlmIChub3QgSXRlbU5hbWVzW2lkXSkgdGhlbg0KCQlyZXR1cm4gX19fR2V0SW52ZW50b3J5U2xvdEl0ZW0oaWQsIHVuaXQpDQoJZW5kDQoNCglsb2NhbCBuYW1lCT0gSXRlbU5hbWVzW2lkXQ0KCQ0KCWZvciBzbG90ID0gSVRFTV8xLCBJVEVNXzcgZG8NCgkJbG9jYWwgaXRlbSA9IHVuaXQ6R2V0U3BlbGxEYXRhKHNsb3QpLm5hbWUNCgkJaWYgKCgjaXRlbSA+IDApIGFuZCAoaXRlbTpsb3dlcigpID09IG5hbWU6bG93ZXIoKSkpIHRoZW4NCgkJCXJldHVybiBzbG90DQoJCWVuZA0KCWVuZA0KDQplbmQNCg0KDQoNCmZ1bmN0aW9uIFpob255YSgpDQoJbG9jYWwgU2xvdCA9IEdldEludmVudG9yeVNsb3RJdGVtKDMxNTcpDQoJCWlmIFNsb3Qgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoU2xvdCkgPT0gUkVBRFkgdGhlbg0KCQkJbG9jYWwgUmFuZ2UgPSA5MDANCgkJCWxvY2FsIEFtb3VudCA9IEhhek1lbnUuTWlzYy5BbW91bnQNCgkJCWxvY2FsIGhlYWx0aCA9IG15SGVyby5oZWFsdGgNCgkJCWxvY2FsIG1heEhlYWx0aCA9IG15SGVyby5tYXhIZWFsdGgNCgkJCQlpZiAoKGhlYWx0aC9tYXhIZWFsdGgpKjEwMCkgPD0gSGF6TWVudS5NaXNjLnpob255YUhQIGFuZCBDb3VudEVuZW15SGVyb0luUmFuZ2UoUmFuZ2UpID49IEFtb3VudCB0aGVuDQoJCQlDYXN0U3BlbGwoU2xvdCkNCgkJZW5kDQoJZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBDb3VudEVuZW15SGVyb0luUmFuZ2UocmFuZ2UpDQoJbG9jYWwgZW5lbXlJblJhbmdlID0gMA0KCQlmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCwgMSBkbw0KCQkJbG9jYWwgaGVybyA9IGhlcm9NYW5hZ2VyOmdldEhlcm8oaSkNCgkJCQlpZiBWYWxpZFRhcmdldChoZXJvLHJhbmdlKSB0aGVuDQoJCQllbmVteUluUmFuZ2UgPSBlbmVteUluUmFuZ2UgKyAxDQoJCQllbmQNCgkJZW5kDQoJcmV0dXJuIGVuZW15SW5SYW5nZQ0KZW5kDQoNCg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQpmdW5jdGlvbiBtb3ZldG8oKQ0KICAgIGlmIFEuSXNSZWFkeSgpIGFuZCBIYXpNZW51Lk1vcmUubW92ZXRvIHRoZW4gDQoJICBNUG9zID0gVmVjdG9yKG1vdXNlUG9zLngsIG1vdXNlUG9zLnksIG1vdXNlUG9zLnopDQogICAgICAgIEhlcm9Qb3MgPSBWZWN0b3IobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueikNCiAgICAgICAgRGFzaFBvcyA9IEhlcm9Qb3MgKyAoIEhlcm9Qb3MgLSBNUG9zICkqKDUwMC9HZXREaXN0YW5jZShtb3VzZVBvcykpDQogICAgICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCwgbW91c2VQb3MueikNCiAgICAgICAgQ2FzdFNwZWxsKF9RLERhc2hQb3MueCwgRGFzaFBvcy56KQ0KICAgICAgICBteUhlcm86TW92ZVRvKG1vdXNlUG9zLngsIG1vdXNlUG9zLnopDQogICAgZW5kDQplbmQNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1hdXRvcG90aW9ucy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo=="), nil, "bt", _ENV))()
